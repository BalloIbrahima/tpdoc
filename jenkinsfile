pipeline {
    agent any

//     environment {
//         // // // // //Variables d'environnement
// //         MAVEN_HOME = tool name: 'Maven 3', type: 'maven'
// //         JAVA_HOME = tool name: 'JDK 17', type: 'jdk'
//     }
    stages {
            stage('Récupère le code du dépôt') {
                steps {
                    // Récupère le code du dépôt
                    git branch: 'main', url: 'https://github.com/BalloIbrahima/tpdoc.git'
                    //git 'https://github.com/BalloIbrahima/tpdoc.git'
                }
            }
            //Buid Project Jar
            stage('Build Jar ') {
                agent {
                //Go to take maven from docker
                    docker {
                        image 'maven'
                        args '-u root'
                    }
                }
                //buid jar
                steps {
                    sh 'mvn clean install -DskipTests'
                }
            }
    }

    post {
        success {
            // Notification ou action en cas de succès du pipeline
            echo 'Pipeline terminé avec succès.'
        }
        failure {
            // Notification ou action en cas d'échec du pipeline
            echo 'Pipeline échoué.'
        }
    }
}
